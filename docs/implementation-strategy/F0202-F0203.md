# F0202-F0203: サムネイル表示 + エンゲージメント率計算

## 概要
投稿テーブルにサムネイル画像表示機能とエンゲージメント率計算ロジックを追加。ダミー画像とutils.tsの計算式を活用する。

## 実装戦略

### 1. サムネイル表示機能 (1.5時間)
#### サムネイル画像用ダミーデータ準備
- UnsplashのランダムAPI使用: `https://picsum.photos/400/400?random=1`
- `mock-data.ts`のthumbnail_url, media_urlにUnsplash URLを設定
- 各投稿に異なるランダム画像を割り当て（seed値を変更）

#### Thumbnailコンポーネント作成
- `src/components/ui/thumbnail.tsx`作成
- Next.js Imageコンポーネント使用
- エラー時のプレースホルダー画像対応
- サイズ: 48x48px（w-12 h-12）
- 角丸、オブジェクトフィット調整

### 2. エンゲージメント率計算統合 (1時間)
#### 計算式確認・調整
- `lib/utils.ts`のcalculateEngagementRate関数を小数点1桁に修正
- 現在: `Math.round((totalEngagements / reach) * 100 * 100) / 100`
- 修正後: `Math.round((totalEngagements / reach) * 100 * 10) / 10`
- パーセンテージ表示、小数点1桁で丸め

#### テーブル統合
- PostsTableコンポーネントのエンゲージメント率カラム実装
- utils関数を使用して動的計算
- フォーマット: "12.3%" 形式で表示

### 3. テーブルレイアウト調整 (30分)
- サムネイルカラムの幅調整
- エンゲージメント率カラムの配置
- 数値の右寄せ、画像の中央揃え
- スマートフォンでの表示は考慮なし（PC専用）

### 4. ダミーデータ品質向上 (30分)
- より現実的なエンゲージメント数値設定
- Unsplash画像URLのseed値をランダム生成
- メディアタイプ別の画像カテゴリ設定（food, nature, technology等）

## 完了条件
- [ ] サムネイル画像が正常に表示される
- [ ] エンゲージメント率が正確に計算・表示される
- [ ] 画像読み込みエラー時のプレースホルダーが動作する
- [ ] テーブルのレイアウトが整っている
- [ ] 型エラーなしで動作する

## PoC配慮
- **実際のInstagram画像なし**: Unsplashランダム画像で代用
- **画像最適化なし**: シンプルなNext.js Image使用
- **エラーハンドリング最小限**: 基本的なプレースホルダーのみ
- **レスポンシブ対応なし**: PC専用レイアウト

## スコープ外機能
```tsx
// TODO: B0204 API統合後に実際の投稿画像URL使用
// TODO: 画像の遅延読み込み最適化（PoC範囲外）
// TODO: 画像キャッシュ制御（PoC範囲外）
```

## 技術詳細

### サムネイル表示
```tsx
// components/ui/thumbnail.tsx
export function Thumbnail({ 
  src, 
  alt, 
  size = 48 
}: ThumbnailProps) {
  return (
    <div className="relative">
      <Image
        src={src || 'https://picsum.photos/400/400?random=999'}
        alt={alt}
        width={size}
        height={size}
        className="rounded-md object-cover"
        onError={() => /* fallback to placeholder */}
      />
    </div>
  )
}
```

### エンゲージメント率表示
```tsx
// utils.ts の関数を使用
const engagementRate = calculateEngagementRate(post)
return `${engagementRate}%`
```

## 参考
- [ページデザイン設計](../requirement-definition/03-page-design.md) - サムネイル仕様
- [utils.ts](../../frontend/src/lib/utils.ts) - 計算ロジック
- Next.js Image最適化ドキュメント