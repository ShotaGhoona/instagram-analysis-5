# B0202: アカウント情報取得API実装

## 概要
フロントエンドのアカウント切り替えpopover（F0701）で使用する、Instagram アカウント一覧と個別詳細を取得するAPIの実装。既存の `backend/api/accounts.py` に機能追加。

## 現状確認
✅ 既に実装済みの機能:
- `GET /accounts/` - 全アカウント一覧取得
- `GET /accounts/{account_id}` - 個別アカウント詳細取得  
- `POST /accounts/` - 新規アカウント作成
- DatabaseManager の Instagram アカウント CRUD操作

## 実装戦略

### 1. 既存コードレビューと問題点確認 (15分)
- `backend/api/accounts.py:38` の `get_account` 関数でパラメータが `account_id: str` だが、実際は `ig_user_id` で検索している
- レスポンスモデルで `access_token` を返していない（セキュリティ上適切）
- 認証ガードが正しく動作しているか確認

### 2. API エンドポイントのテストとバグ修正 (30分)
- FastAPI の自動ドキュメント（`/docs`）でエンドポイントテスト
- パラメータ名の整合性を確認・修正
- エラーハンドリングの動作確認

### 3. main.py へのルーター登録確認 (15分)  
- `backend/main.py` で accounts ルーターが正しく登録されているか確認
- 必要に応じて登録追加

## 完了条件
- [ ] `GET /accounts/` でアカウント一覧が取得できる
- [ ] `GET /accounts/{ig_user_id}` で個別アカウント詳細が取得できる  
- [ ] 認証が必要なエンドポイントで、未認証時は 401 エラーが返る
- [ ] FastAPI docs（`/docs`）でエンドポイントが正しく表示される
- [ ] フロントエンド連携用のレスポンス形式が適切（id, name, username, profile_picture_url）

## PoC配慮
- 現段階では既存実装のテスト・修正のみ
- 高度なエラーハンドリングやバリデーションは最小限
- Instagram Graph API からのリアルタイム情報取得は B0201 で実装予定
- セキュリティ面での access_token 暗号化等は本格実装時に対応

## 依存関係
- ✅ B0121, B0122: 認証API（実装済み）
- ⏳ B0201: Instagram API認証統合（未実装）
- ⏳ F0701: アカウント選択UI（次タスク）

## 注意点
- 現在のアカウントデータはテスト用ダミーデータ
- セットアップ機能（B0151-B0153）実装後に実際のInstagramアカウント連携