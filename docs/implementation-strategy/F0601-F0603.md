# F0601-F0603: ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼æ©Ÿèƒ½å®Ÿè£…

## æ¦‚è¦
æŠ•ç¨¿åˆ†æãƒšãƒ¼ã‚¸ã«æ—¥ä»˜ç¯„å›²é¸æŠã¨ãƒ¡ãƒ‡ã‚£ã‚¢ã‚¿ã‚¤ãƒ—ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°æ©Ÿèƒ½ã‚’å®Ÿè£…ã€‚shadcn/ui Calendarã€Selectã€çŠ¶æ…‹ç®¡ç†ãƒ•ãƒƒã‚¯ã‚’ä½¿ç”¨ã—ã¦ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–ãªãƒ•ã‚£ãƒ«ã‚¿ãƒ¼æ©Ÿèƒ½ã‚’æä¾›ã™ã‚‹ã€‚

## å®Ÿè£…æˆ¦ç•¥

### 1. æ—¥ä»˜ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ï¼ˆF0601ï¼‰ (2.5æ™‚é–“)
#### Date Range Pickerå®Ÿè£…
- `src/components/filters/date-filter.tsx`ä½œæˆ
- shadcn/ui Calendarã¨Popoverã‚’çµ„ã¿åˆã‚ã›
- æ—¥ä»˜ç¯„å›²é¸æŠUIï¼šã€Œ2025/08/01 - 2025/08/31ã€å½¢å¼
- ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼šå½“æœˆ1æ—¥ã€œæœ«æ—¥

#### ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä»•æ§˜
```tsx
interface DateFilterProps {
  value: DateRange | undefined
  onChange: (dateRange: DateRange | undefined) => void
}
```

### 2. ãƒ¡ãƒ‡ã‚£ã‚¢ã‚¿ã‚¤ãƒ—ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ï¼ˆF0602ï¼‰ (1.5æ™‚é–“)
#### Multi-Selectå®Ÿè£…
- `src/components/filters/media-type-filter.tsx`ä½œæˆ
- shadcn/ui Selectã¾ãŸã¯ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ç¾¤
- é¸æŠè‚¢ï¼šã€ŒAllã€ã€ŒIMAGEã€ã€ŒVIDEOã€ã€ŒCAROUSELã€ï¼ˆã€ŒSTORYã€ã¯å°†æ¥æ‹¡å¼µï¼‰
- ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼šã€ŒAllã€é¸æŠçŠ¶æ…‹

#### UIè¡¨ç¤º
- è¤‡æ•°é¸æŠå¯èƒ½ãªãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³
- é¸æŠæ¸ˆã¿ã‚¿ã‚°è¡¨ç¤ºï¼ˆä¾‹ï¼šã€ŒIMAGE, VIDEOã€ï¼‰

### 3. ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼çŠ¶æ…‹ç®¡ç†ï¼ˆF0603ï¼‰ (2æ™‚é–“)
#### ã‚«ã‚¹ã‚¿ãƒ ãƒ•ãƒƒã‚¯ä½œæˆ
- `src/hooks/use-filter-state.ts`ä½œæˆ
- æ—¥ä»˜ç¯„å›²ã¨ãƒ¡ãƒ‡ã‚£ã‚¢ã‚¿ã‚¤ãƒ—ã®çŠ¶æ…‹ç®¡ç†
- ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼é©ç”¨ãƒ­ã‚¸ãƒƒã‚¯ï¼ˆmockãƒ‡ãƒ¼ã‚¿ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ï¼‰

#### çŠ¶æ…‹ç®¡ç†ä»•æ§˜
```tsx
interface FilterState {
  dateRange: DateRange | undefined
  mediaTypes: MediaType[]
}

export function useFilterState() {
  // ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼çŠ¶æ…‹ç®¡ç†
  // ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°æ¸ˆã¿ãƒ‡ãƒ¼ã‚¿è¿”å´
  // ãƒªã‚»ãƒƒãƒˆæ©Ÿèƒ½
}
```

### 4. æŠ•ç¨¿åˆ†æãƒšãƒ¼ã‚¸çµ±åˆ (1æ™‚é–“)
#### ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ UIçµ±åˆ
- æ—¢å­˜ã®ãƒ—ãƒ¬ãƒ¼ã‚¹ãƒ›ãƒ«ãƒ€ãƒ¼ã‚’ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼æ©Ÿèƒ½ã«ç½®ãæ›ãˆ
- PostsTableã¨PostsPerformanceChartã«ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼æ¸ˆã¿ãƒ‡ãƒ¼ã‚¿ã‚’æ¸¡ã™
- ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼çŠ¶æ…‹ã®è¡¨ç¤ºæ›´æ–°

#### ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆèª¿æ•´
- ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã®é…ç½®èª¿æ•´
- ã€Œé©ç”¨ã€ãƒœã‚¿ãƒ³ã¾ãŸã¯ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°é¸æŠ

## å®Œäº†æ¡ä»¶
- [ ] æ—¥ä»˜ç¯„å›²é¸æŠãŒæ­£å¸¸ã«å‹•ä½œã™ã‚‹
- [ ] ãƒ¡ãƒ‡ã‚£ã‚¢ã‚¿ã‚¤ãƒ—ã®è¤‡æ•°é¸æŠãŒå¯èƒ½
- [ ] ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼é©ç”¨ã§ãƒ†ãƒ¼ãƒ–ãƒ«ã¨ã‚°ãƒ©ãƒ•ãŒæ›´æ–°ã•ã‚Œã‚‹
- [ ] ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼çŠ¶æ…‹ãŒUIã«æ­£ç¢ºã«åæ˜ ã•ã‚Œã‚‹
- [ ] TypeScriptå‹ã‚¨ãƒ©ãƒ¼ãŒãªã„
- [ ] ãƒ‡ã‚¶ã‚¤ãƒ³ãŒæ—¢å­˜ãƒšãƒ¼ã‚¸ã¨çµ±ä¸€ã•ã‚Œã¦ã„ã‚‹

## PoCé…æ…®
- **URLåŒæœŸã¯ç°¡ç´ åŒ–**: useStateä½¿ç”¨ã€URLåŒæœŸã¯å°†æ¥å®Ÿè£…
- **ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–ãªã—**: ãƒ¡ãƒ¢åŒ–ã¯ä¸è¦ï¼ˆãƒ‡ãƒ¼ã‚¿é‡å°‘ï¼‰
- **è¤‡é›‘ãªãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ç„¡ã—**: åŸºæœ¬çš„ãªå…¥åŠ›ãƒã‚§ãƒƒã‚¯ã®ã¿
- **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°æœ€å°é™**: æ­£å¸¸ç³»ã®å‹•ä½œç¢ºèªã‚’å„ªå…ˆ

## ã‚¹ã‚³ãƒ¼ãƒ—å¤–æ©Ÿèƒ½
```tsx
// TODO: URLåŒæœŸæ©Ÿèƒ½ï¼ˆrouter.pushç­‰ï¼‰
// TODO: ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼å±¥æ­´æ©Ÿèƒ½
// TODO: ãƒ—ãƒªã‚»ãƒƒãƒˆãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ï¼ˆä»Šé€±ã€å…ˆæœˆç­‰ï¼‰
// TODO: é«˜åº¦ãªæ—¥ä»˜ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
// TODO: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–ï¼ˆuseMemoã€useCallbackï¼‰
```

## æŠ€è¡“è©³ç´°

### æ—¥ä»˜ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼å®Ÿè£…ä¾‹
```tsx
// components/filters/date-filter.tsx
export function DateFilter({ value, onChange }: DateFilterProps) {
  return (
    <Popover>
      <PopoverTrigger asChild>
        <Button variant="outline">
          ğŸ“… {value ? formatDateRange(value) : "æœŸé–“ã‚’é¸æŠ"}
        </Button>
      </PopoverTrigger>
      <PopoverContent className="w-auto p-0">
        <Calendar
          mode="range"
          selected={value}
          onSelect={onChange}
          numberOfMonths={2}
        />
      </PopoverContent>
    </Popover>
  )
}
```

### ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ãƒ­ã‚¸ãƒƒã‚¯
```tsx
// hooks/use-filter-state.ts
export function useFilterState(initialPosts: MediaPost[]) {
  const [dateRange, setDateRange] = useState<DateRange | undefined>()
  const [mediaTypes, setMediaTypes] = useState<MediaType[]>([])

  const filteredPosts = useMemo(() => {
    return initialPosts.filter(post => {
      // æ—¥ä»˜ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
      if (dateRange) {
        const postDate = new Date(post.timestamp)
        if (postDate < dateRange.from || postDate > dateRange.to) {
          return false
        }
      }
      
      // ãƒ¡ãƒ‡ã‚£ã‚¢ã‚¿ã‚¤ãƒ—ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
      if (mediaTypes.length > 0) {
        if (!mediaTypes.includes(post.media_type)) {
          return false
        }
      }
      
      return true
    })
  }, [initialPosts, dateRange, mediaTypes])

  return {
    dateRange,
    setDateRange,
    mediaTypes, 
    setMediaTypes,
    filteredPosts
  }
}
```

### ãƒ¡ãƒ‡ã‚£ã‚¢ã‚¿ã‚¤ãƒ—ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼å®Ÿè£…ä¾‹
```tsx
// components/filters/media-type-filter.tsx
export function MediaTypeFilter({ value, onChange }: MediaTypeFilterProps) {
  const options = [
    { value: 'IMAGE', label: 'IMAGE' },
    { value: 'VIDEO', label: 'VIDEO' },
    { value: 'CAROUSEL_ALBUM', label: 'CAROUSEL' },
    // TODO: { value: 'STORY', label: 'STORY' } å°†æ¥å®Ÿè£…
  ]

  return (
    <MultiSelect
      options={options}
      value={value}
      onChange={onChange}
      placeholder="ã‚¿ã‚¤ãƒ—ã‚’é¸æŠ"
    />
  )
}
```

## å®Ÿè£…é †åº
1. **DateFilter ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ** â†’ shadcn/ui Calendarçµ±åˆ
2. **MediaTypeFilter ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ** â†’ Select UIä½œæˆ  
3. **useFilterState ãƒ•ãƒƒã‚¯** â†’ ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°ãƒ­ã‚¸ãƒƒã‚¯å®Ÿè£…
4. **ãƒšãƒ¼ã‚¸çµ±åˆ** â†’ æ—¢å­˜ãƒ†ãƒ¼ãƒ–ãƒ«ãƒ»ã‚°ãƒ©ãƒ•ã¨ã®é€£æº
5. **UIèª¿æ•´** â†’ ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆãƒ»ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°æœ€çµ‚èª¿æ•´

## å‚è€ƒ
- [shadcn/ui Calendar](https://ui.shadcn.com/docs/components/calendar)
- [Date Range Pickerå®Ÿè£…ä¾‹](https://ui.shadcn.com/docs/components/date-picker)
- [æ—¢å­˜ãƒ‡ã‚¶ã‚¤ãƒ³](../requirement-definition/03-page-design.md) - ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ä»•æ§˜