# F0502: 年間分析フィルター状態管理

## 概要
年間分析フィルターの状態管理（useYearFilter）とURL同期、API連携を実装する。月間分析フィルター（F0504）の実装パターンを年間分析用に適用。

## 実装戦略

### 1. カスタムフック作成 (1時間)
- `use-year-filter.ts`作成（F0504のuseMonthFilterパターン踏襲）
- 年状態管理（useState）
- デフォルト値設定（現在年）
- フィルター変更時のコールバック実装

### 2. API連携実装 (45分)
- 既存`useYearlyAnalytics`フック活用（F0304で年パラメータ対応済み）
- 年パラメータ渡し
- リアルタイムデータ取得
- エラーハンドリング（404/500対応、F0304パターン踏襲）

### 3. URL同期実装 (15分)
- URLパラメータ読み取り・書き込み（F0504パターン踏襲）
- ブラウザ履歴対応
- ページリロード時の状態復元

## 完了条件
- [ ] `use-year-filter.ts`が正常動作する
- [ ] 年変更時にAPIが呼び出される（useYearlyAnalytics連携）
- [ ] URL同期が正常動作する（/yearly?year=2025形式）
- [ ] ローディング・エラー状態が適切に表示される
- [ ] ページリロード時に状態が復元される

## PoC配慮
- 複雑なURL操作は不要（基本的なクエリパラメータのみ）
- パフォーマンス最適化は最小限
- エラーメッセージは日本語で統一（F0304パターン踏襲）
- 既存APIとフックを最大活用