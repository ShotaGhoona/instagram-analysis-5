# F0081 & F0082 & F0083: 基本レイアウトコンポーネント

## 概要
ヘッダー・ナビゲーション・基本レイアウト統合の実装。既存コンポーネントの改良と分析ページでの適用。

## 実装戦略

### 1. 既存コンポーネント確認・改良 (30分)
- Header: 既存実装を確認・必要に応じて改良
- Navigation: 既存実装確認・アカウントID処理改良
- レイアウト統合の設計確認

### 2. 分析ページレイアウト作成 (90分)
- `/analytics/account/[accountId]/layout.tsx` 作成
- Header + Navigation + main content の統合
- レスポンシブ対応基本設定

### 3. 分析ページ作成・動作テスト (60分)
- `/analytics/account/[accountId]/yearly/page.tsx` プレースホルダー作成
- `/analytics/account/[accountId]/monthly/page.tsx` プレースホルダー作成
- `/analytics/account/[accountId]/posts/page.tsx` プレースホルダー作成
- ナビゲーション遷移テスト

### 4. 認証ガード統合・最終調整 (15分)
- 分析ページに認証ガード適用
- レイアウト・スタイル最終調整

## 実装内容

### 現状分析
```tsx
// 既存実装確認済み
✅ frontend/src/components/layout/header.tsx - シンプルなヘッダー実装済み
✅ frontend/src/components/layout/navigation.tsx - ナビゲーション実装済み（usePathname使用）
❌ 分析ページレイアウト - 未実装
❌ 実際の分析ページ - 未実装
```

### ファイル構成
```
frontend/src/app/
└── analytics/account/[accountId]/
    ├── layout.tsx              # 新規作成: Header + Navigation レイアウト
    ├── yearly/page.tsx         # 新規作成: 年間分析プレースホルダー
    ├── monthly/page.tsx        # 新規作成: 月間分析プレースホルダー
    └── posts/page.tsx          # 新規作成: 投稿分析プレースホルダー
```

### 分析ページレイアウト実装
```tsx
// app/analytics/account/[accountId]/layout.tsx
import { Header } from '@/components/layout/header'
import { Navigation } from '@/components/layout/navigation'
import { AuthGuard } from '@/components/auth/auth-guard'

interface AnalyticsLayoutProps {
  children: React.ReactNode
  params: { accountId: string }
}

export default function AnalyticsLayout({ children, params }: AnalyticsLayoutProps) {
  return (
    <AuthGuard requireAuth={true}>
      <div className="min-h-screen bg-gray-50">
        <Header />
        <div className="flex">
          <Navigation accountId={params.accountId} />
          <main className="flex-1 p-6">
            {children}
          </main>
        </div>
      </div>
    </AuthGuard>
  )
}
```

### プレースホルダーページ実装
```tsx
// app/analytics/account/[accountId]/yearly/page.tsx
interface YearlyAnalyticsPageProps {
  params: { accountId: string }
}

export default function YearlyAnalyticsPage({ params }: YearlyAnalyticsPageProps) {
  return (
    <div>
      <h1 className="text-3xl font-bold mb-4">年間分析</h1>
      <p className="text-gray-600 mb-6">アカウント ID: {params.accountId}</p>
      <div className="bg-white rounded-lg shadow border p-6">
        <p className="text-gray-500">年間分析機能は実装予定です</p>
        {/* TODO: F0301-F0304 年間分析コンポーネント実装後に統合 */}
      </div>
    </div>
  )
}

// monthly/page.tsx, posts/page.tsx も同様の構造
```

### Navigation改良（必要に応じて）
```tsx
// 既存のNavigationコンポーネントは適切に実装済み
// accountId prop を受け取り、動的リンク生成
// usePathname でアクティブ状態管理
// 改良不要の可能性高い
```

## 認証連携
```tsx
// ログイン成功後のリダイレクト先を更新
// hooks/use-auth.tsx の login 関数
window.location.href = `/analytics/account/1/yearly`  // 固定accountId: 1
```

## 完了条件
- [ ] Header コンポーネント動作確認
- [ ] Navigation コンポーネント動作確認・アクティブ状態表示
- [ ] 分析ページレイアウト（Header + Navigation + content）表示
- [ ] 3つの分析ページプレースホルダー作成
- [ ] ナビゲーション遷移動作確認
- [ ] 認証ガード適用確認
- [ ] レスポンシブレイアウト基本動作

## PoC配慮
- 分析ページは空のプレースホルダーでOK
- accountId固定（1を使用）で簡略化
- 高度なスタイリングは不要（shadcn/ui基本デザイン）
- エラーハンドリング最小限

## 次のタスク
レイアウト基盤完成後、F0701（アカウント選択UI）またはF0201（投稿分析テーブル）に進む