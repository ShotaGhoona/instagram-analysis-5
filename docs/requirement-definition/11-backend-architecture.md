# ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆ

**ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ**: Instagramåˆ†æã‚¢ãƒ—ãƒªï¼ˆPoCï¼‰  
**å¯¾è±¡**: 1-3äººã€100Instagramã‚¢ã‚«ã‚¦ãƒ³ãƒˆç®¡ç†  
**ã‚¹ã‚¿ãƒƒã‚¯**: FastAPI + Supabase + Next.js

## ğŸ—ï¸ ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“æ§‹æˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Next.js       â”‚â”€â”€â”€â”€â”‚   FastAPI    â”‚â”€â”€â”€â”€â”‚   Supabase      â”‚
â”‚   (Frontend)    â”‚    â”‚  (Backend)   â”‚    â”‚  (Database)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ GitHub Actions  â”‚
                    â”‚ (Data Collector)â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚Instagram Graph  â”‚
                    â”‚      API        â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“Š ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆï¼ˆSupabaseï¼‰

### ãƒ†ãƒ¼ãƒ–ãƒ«æ§‹é€ 
```sql
-- ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†ï¼ˆè¶…ã‚·ãƒ³ãƒ—ãƒ«ï¼‰
users (id, username, password_hash, created_at)

-- Instagramã‚¢ã‚«ã‚¦ãƒ³ãƒˆç®¡ç†
instagram_accounts (
  id, name, ig_user_id, access_token, 
  username, profile_picture_url, created_at
)

-- æ—¥æ¬¡ã‚¢ã‚«ã‚¦ãƒ³ãƒˆçµ±è¨ˆ
daily_account_stats (
  date, ig_user_id, followers_count, follows_count, 
  media_count, profile_views, website_clicks
)

-- æŠ•ç¨¿ãƒ‡ãƒ¼ã‚¿
media_posts (
  ig_media_id, ig_user_id, timestamp, media_type,
  caption, media_url, thumbnail_url, permalink
)

-- æ—¥æ¬¡æŠ•ç¨¿çµ±è¨ˆ
daily_media_stats (
  date, ig_media_id, like_count, comments_count,
  reach, views, shares, saved
)
```

## ğŸ”§ FastAPIãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰æ§‹æˆï¼ˆClean Architectureï¼‰

### ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°å¾Œãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 
```
backend/
â”œâ”€â”€ main.py                      # FastAPI ã‚¢ãƒ—ãƒªèµ·ç‚¹
â”œâ”€â”€ requirements.txt
â”œâ”€â”€
â”œâ”€â”€ api/                         # Presentation Layer
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ accounts.py             # ã‚¢ã‚«ã‚¦ãƒ³ãƒˆç®¡ç†API
â”‚   â”œâ”€â”€ analytics.py            # åˆ†æãƒ‡ãƒ¼ã‚¿API
â”‚   â”œâ”€â”€ media.py                # æŠ•ç¨¿ãƒ‡ãƒ¼ã‚¿API
â”‚   â””â”€â”€ setup.py                # ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—API
â”‚
â”œâ”€â”€ middleware/                  # Cross-cutting Concerns
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ auth/                   # èªè¨¼ãƒ»èªå¯
â”‚       â”œâ”€â”€ __init__.py
â”‚       â”œâ”€â”€ README.md
â”‚       â””â”€â”€ simple_auth.py      # JWTèªè¨¼å®Ÿè£…
â”‚
â”œâ”€â”€ services/                    # Application Layer
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ instagram_service.py    # Instagramé–¢é€£ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯
â”‚
â”œâ”€â”€ repositories/                # Infrastructure Layer
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ base.py                 # BaseRepository
â”‚   â”œâ”€â”€ instagram_repository.py # Instagram ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹
â”‚   â””â”€â”€ user_repository.py      # ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹
â”‚
â”œâ”€â”€ external/                    # Infrastructure Layer
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ instagram_client.py     # Instagram Graph API ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
â”‚
â”œâ”€â”€ core/                        # Core Infrastructure
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ config.py               # è¨­å®šç®¡ç†ï¼ˆSUPABASE_ANON_KEYçµ±ä¸€ï¼‰
â”‚   â””â”€â”€ database.py             # ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šï¼ˆçµ±ä¸€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆï¼‰
â”‚
â”œâ”€â”€ models/                      # Domain Layer
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ user.py                 # ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¢ãƒ‡ãƒ«
â”‚   â”œâ”€â”€ instagram.py            # Instagramãƒ¢ãƒ‡ãƒ«
â”‚   â”œâ”€â”€ analytics.py            # åˆ†æãƒ¢ãƒ‡ãƒ«
â”‚   â””â”€â”€ sql/                    # Database Schema
â”‚       â”œâ”€â”€ create_tables.sql   # ãƒ†ãƒ¼ãƒ–ãƒ«ä½œæˆSQL
â”‚       â””â”€â”€ sample_data.sql     # ã‚µãƒ³ãƒ—ãƒ«ãƒ‡ãƒ¼ã‚¿
â”‚
â””â”€â”€ test/                        # Testing
    â”œâ”€â”€ collect_all_accounts_data.py
    â”œâ”€â”€ debug_insights_api.py
    â”œâ”€â”€ test_auth_api.py
    â”œâ”€â”€ test_b0203.py
    â”œâ”€â”€ test_b0204_multi_account.py
    â”œâ”€â”€ test_b0204.py
    â”œâ”€â”€ test_b0205_account_insights.py
    â””â”€â”€ test_database.py
```

### Clean Architecture å„å±¤ã®è²¬ä»»

#### 1. **Presentation Layer (api/)** - ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹å±¤
- HTTPãƒªã‚¯ã‚¨ã‚¹ãƒˆ/ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®å‡¦ç†
- ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
- Serviceã®å‘¼ã³å‡ºã—ã®ã¿

#### 2. **Cross-cutting Concerns (middleware/)** - æ¨ªæ–­çš„é–¢å¿ƒäº‹
- èªè¨¼ãƒ»èªå¯ï¼ˆJWT Tokenç®¡ç†ï¼‰
- CORSå‡¦ç†
- ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°çµ±ä¸€
- ãƒ­ã‚°æ©Ÿèƒ½ï¼ˆå°†æ¥å®Ÿè£…äºˆå®šï¼‰

#### 3. **Application Layer (services/)** - ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯å±¤
- è¤‡é›‘ãªãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã®å®Ÿè£…
- è¤‡æ•°ã®Repositoryã®çµ„ã¿åˆã‚ã›
- ãƒˆãƒ©ãƒ³ã‚¶ã‚¯ã‚·ãƒ§ãƒ³ç®¡ç†

#### 4. **Infrastructure Layer** - ã‚¤ãƒ³ãƒ•ãƒ©å±¤
- **repositories/**: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹CRUDæ“ä½œ
- **external/**: Instagram APIç­‰ã®å¤–éƒ¨ã‚µãƒ¼ãƒ“ã‚¹é€£æº
- **core/**: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹æ¥ç¶šãƒ»è¨­å®šç®¡ç†

#### 5. **Domain Layer (models/)** - ã‚¨ãƒ³ãƒ†ã‚£ãƒ†ã‚£å±¤
- Pydanticãƒ¢ãƒ‡ãƒ«ã®å®šç¾©ã®ã¿
- ãƒ“ã‚¸ãƒã‚¹ãƒ«ãƒ¼ãƒ«ã®è¡¨ç¾
- ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒï¼ˆSQLï¼‰ã®ç®¡ç†

### Clean Architecture ãƒ¬ã‚¤ãƒ¤ãƒ¼å›³

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Presentation Layer                        â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  FastAPI Routes (api/)                                      â”‚
â”‚  - accounts.py  - analytics.py  - media.py  - setup.py      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Application Layer                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Service Classes (services/)                                â”‚
â”‚  - instagram_service.py                                     â”‚
â”‚                                                             â”‚
â”‚  Cross-cutting Concerns (middleware/)                       â”‚
â”‚  - auth/simple_auth.py (èªè¨¼ãƒ»èªå¯)                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                 Infrastructure Layer                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Repository Pattern (repositories/)                         â”‚
â”‚  - base.py  - instagram_repository.py  - user_repository.py â”‚
â”‚                                                             â”‚
â”‚  External APIs (external/)                                  â”‚
â”‚  - instagram_client.py                                      â”‚
â”‚                                                             â”‚
â”‚  Database Connection (core/)                                â”‚
â”‚  - database.py  - config.py                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                â”‚
                                â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Domain Layer                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Domain Models (models/)                                    â”‚
â”‚  - user.py  - instagram.py  - analytics.py                  â”‚
â”‚  - sql/ (create_tables.sql, sample_data.sql)                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ä¾å­˜é–¢ä¿‚ã®æ–¹å‘

Clean Architecture ã®åŸå‰‡ã«å¾“ã„ã€ä¾å­˜é–¢ä¿‚ã¯ä»¥ä¸‹ã®æ–¹å‘ã«é™å®šã•ã‚Œã¾ã™ï¼š

```
Presentation â†’ Application â†’ Infrastructure
      â†“            â†“
  Middleware â†’ Domain
```

- **Presentation Layer** ã¯ Application Layer ã¨ Middleware ã«ä¾å­˜
- **Application Layer** ã¯ Infrastructure Layer ã¨ Domain Layer ã«ä¾å­˜  
- **Middleware** ã¯ Domain Layer ã«ä¾å­˜ï¼ˆæ¨ªæ–­çš„é–¢å¿ƒäº‹ï¼‰
- **Infrastructure Layer** ã¯ Domain Layer ã«ä¾å­˜
- **Domain Layer** ã¯ä»–ã®å±¤ã«ä¾å­˜ã—ãªã„ï¼ˆæœ€ã‚‚å†…å´ï¼‰

### ä¸»è¦ãªè¨­è¨ˆãƒ‘ã‚¿ãƒ¼ãƒ³

#### 1. Repository Pattern
ãƒ‡ãƒ¼ã‚¿ã‚¢ã‚¯ã‚»ã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã‚’æŠ½è±¡åŒ–ã—ã€ãƒ‰ãƒ¡ã‚¤ãƒ³ãƒ­ã‚¸ãƒƒã‚¯ã‹ã‚‰ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã®è©³ç´°ã‚’éš è”½

#### 2. Dependency Injection
FastAPI ã®ä¾å­˜é–¢ä¿‚æ³¨å…¥ã‚’æ´»ç”¨ã—ã€ç–çµåˆãªè¨­è¨ˆã‚’å®Ÿç¾

#### 3. Service Layer Pattern
è¤‡é›‘ãªãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã‚’ Service ã‚¯ãƒ©ã‚¹ã«é›†ç´„ã—ã€APIå±¤ã‚’è–„ãä¿ã¤

#### 4. Middleware Pattern
æ¨ªæ–­çš„é–¢å¿ƒäº‹ï¼ˆèªè¨¼ãƒ»CORSãƒ»ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ï¼‰ã‚’Middlewareå±¤ã«åˆ†é›¢

#### 5. DTO (Data Transfer Object)
APIå¢ƒç•Œã§ã®ãƒ‡ãƒ¼ã‚¿è»¢é€ã«Pydanticãƒ¢ãƒ‡ãƒ«ã‚’ä½¿ç”¨

### ä¸»è¦API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
```python
# èªè¨¼
POST /auth/login
POST /auth/logout

# ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ï¼ˆãƒˆãƒ¼ã‚¯ãƒ³ç®¡ç†ï¼‰
POST /setup/refresh-tokens    # å…¨ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®ãƒˆãƒ¼ã‚¯ãƒ³ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ãƒ»æ–°è¦è¿½åŠ 

# ã‚¢ã‚«ã‚¦ãƒ³ãƒˆç®¡ç†
GET  /accounts          # å…¨Instagramã‚¢ã‚«ã‚¦ãƒ³ãƒˆä¸€è¦§
GET  /accounts/{id}     # å€‹åˆ¥ã‚¢ã‚«ã‚¦ãƒ³ãƒˆè©³ç´°

# åˆ†æãƒ‡ãƒ¼ã‚¿
GET  /analytics/yearly/{account_id}   # å¹´é–“åˆ†æ
GET  /analytics/monthly/{account_id}  # æœˆé–“åˆ†æ  
GET  /analytics/posts/{account_id}    # æŠ•ç¨¿åˆ†æ

# æŠ•ç¨¿ãƒ‡ãƒ¼ã‚¿
GET  /media/{account_id}              # æŠ•ç¨¿ä¸€è¦§
GET  /media/{media_id}/insights       # æŠ•ç¨¿ã‚¤ãƒ³ã‚µã‚¤ãƒˆ
```

## ğŸ¤– GitHub Actions ãƒ‡ãƒ¼ã‚¿åé›†

### ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼æ§‹æˆ
```yaml
# .github/workflows/data-collection.yml
name: Daily Instagram Data Collection
on:
  schedule:
    - cron: '0 9 * * *'  # æ¯æ—¥9æ™‚å®Ÿè¡Œ

jobs:
  collect:
    runs-on: ubuntu-latest
    steps:
      - name: ãƒ‡ãƒ¼ã‚¿åé›†ã‚¹ã‚¯ãƒªãƒ—ãƒˆå®Ÿè¡Œ
        run: python scripts/daily_collector.py
      - name: Supabaseã¸ãƒ‡ãƒ¼ã‚¿ä¿å­˜
        run: python scripts/save_to_database.py
```

### ãƒ‡ãƒ¼ã‚¿åé›†ãƒ•ãƒ­ãƒ¼
1. **ã‚¢ã‚«ã‚¦ãƒ³ãƒˆåŸºæœ¬æƒ…å ±æ›´æ–°** (æ—¥1å›)
2. **æ–°è¦æŠ•ç¨¿æ¤œå‡ºãƒ»ä¿å­˜** (æŠ•ç¨¿æ¯)
3. **æŠ•ç¨¿ã‚¤ãƒ³ã‚µã‚¤ãƒˆå–å¾—** (æŠ•ç¨¿æ¯)
4. **ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãƒ¬ãƒ™ãƒ«ã‚¤ãƒ³ã‚µã‚¤ãƒˆå–å¾—** (æ—¥1å›)

## ğŸ¯ å®Ÿè£…å„ªå…ˆåº¦

### Phase 1: åŸºç›¤æ§‹ç¯‰
1. âœ… **Supabase ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—**
2. âœ… **FastAPI åŸºæœ¬æ§‹æˆ**
3. âœ… **ã‚·ãƒ³ãƒ—ãƒ«èªè¨¼å®Ÿè£…**
4. âœ… **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åˆæœŸåŒ–**

### Phase 2: ãƒ‡ãƒ¼ã‚¿åé›†
1. âœ… **GitHub Actions ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—**
2. âœ… **Instagram API çµ±åˆ**
3. âœ… **æ¯æ—¥ãƒ‡ãƒ¼ã‚¿åé›†è‡ªå‹•åŒ–**

### Phase 3: åˆ†æAPI
1. âœ… **æŠ•ç¨¿åˆ†æã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**
2. âœ… **å¹´é–“/æœˆé–“åˆ†æã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**
3. âœ… **ã‚¢ã‚«ã‚¦ãƒ³ãƒˆç®¡ç†ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**

## ğŸ”„ ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°æˆ¦ç•¥

## ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

### éšå±¤åˆ¥ã‚¨ãƒ©ãƒ¼å‡¦ç†
1. **Presentation Layer**: HTTP ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰ã¨ã‚¨ãƒ©ãƒ¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹
2. **Middleware Layer**: æ¨ªæ–­çš„ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ï¼ˆçµ±ä¸€ãƒ¬ã‚¹ãƒãƒ³ã‚¹å½¢å¼ï¼‰
3. **Application Layer**: ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã‚¨ãƒ©ãƒ¼ã®æ•æ‰ã¨å¤‰æ›
4. **Infrastructure Layer**: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¨ãƒ©ãƒ¼ã‚„API ã‚¨ãƒ©ãƒ¼ã®å‡¦ç†

### ã‚¨ãƒ©ãƒ¼ç¨®åˆ¥ï¼ˆB0501å¯¾å¿œäºˆå®šï¼‰
- **400**: Bad Requestï¼ˆãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã‚¨ãƒ©ãƒ¼ï¼‰
- **401**: Unauthorizedï¼ˆèªè¨¼ã‚¨ãƒ©ãƒ¼ï¼‰
- **403**: Forbiddenï¼ˆèªå¯ã‚¨ãƒ©ãƒ¼ï¼‰
- **404**: Not Foundï¼ˆãƒªã‚½ãƒ¼ã‚¹æœªå­˜åœ¨ï¼‰
- **500**: Internal Server Errorï¼ˆã‚·ã‚¹ãƒ†ãƒ ã‚¨ãƒ©ãƒ¼ï¼‰

### çµ±ä¸€ã‚¨ãƒ©ãƒ¼ãƒ¬ã‚¹ãƒãƒ³ã‚¹å½¢å¼
```json
{
  "error": {
    "code": "VALIDATION_ERROR",
    "message": "å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ãŒæ­£ã—ãã‚ã‚Šã¾ã›ã‚“",
    "details": {...}
  }
}
```

## å“è³ªä¿è¨¼ã¨ä¿å®ˆæ€§

### ä¿å®ˆæ€§
- **å˜ä¸€è²¬ä»»ã®åŸå‰‡**: å„ã‚¯ãƒ©ã‚¹ã®è²¬å‹™æ˜ç¢ºåŒ–
- **Clean Architecture**: å±¤é–“ã®æ˜ç¢ºãªåˆ†é›¢ã¨ä¾å­˜é–¢ä¿‚åˆ¶å¾¡
- **é‡è¤‡ã‚³ãƒ¼ãƒ‰å‰Šé™¤**: çµ±ä¸€ã•ã‚ŒãŸãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã¨è¨­å®šç®¡ç†
- **ãƒ†ã‚¹ã‚¿ãƒ“ãƒªãƒ†ã‚£**: ãƒ¦ãƒ‹ãƒƒãƒˆãƒ†ã‚¹ãƒˆãƒ»çµ±åˆãƒ†ã‚¹ãƒˆå¯¾å¿œ
- **ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: ã‚³ãƒ¡ãƒ³ãƒˆã¨READMEã«ã‚ˆã‚‹ç†è§£ä¿ƒé€²

### æ‹¡å¼µæ€§
- **Middleware**: æ–°ã—ã„æ¨ªæ–­çš„é–¢å¿ƒäº‹ã®è¿½åŠ ãŒå®¹æ˜“
- **Repository Pattern**: æ–°ã—ã„ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã®è¿½åŠ ãŒå®¹æ˜“
- **Service Layer**: æ–°ã—ã„ãƒ“ã‚¸ãƒã‚¹ãƒ­ã‚¸ãƒƒã‚¯ã®å®Ÿè£…ãŒå®¹æ˜“

## ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ”¹å–„å±¥æ­´

### 2025-09-09: ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°å®Ÿæ–½
- **é‡è¤‡ã‚³ãƒ¼ãƒ‰å‰Šé™¤**: 302è¡Œã®ãƒ¬ã‚¬ã‚·ãƒ¼ã‚³ãƒ¼ãƒ‰é™¤å»
- **èªè¨¼ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ”¹å–„**: `auth/` â†’ `middleware/auth/` ã«ç§»å‹•
- **ç’°å¢ƒå¤‰æ•°çµ±ä¸€**: `SUPABASE_ANON_KEY`ã§çµ±ä¸€
- **ãƒ•ã‚¡ã‚¤ãƒ«æ§‹é€ æœ€é©åŒ–**: ãƒ†ã‚¹ãƒˆãƒ»SQLãƒ•ã‚¡ã‚¤ãƒ«ã®é©åˆ‡é…ç½®
- **Clean Architectureå®Œå…¨æº–æ‹ **: å±¤é–“ã®æ˜ç¢ºãªè²¬å‹™åˆ†é›¢

### ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°åŠ¹æœ
- **ã‚³ãƒ¼ãƒ‰å“è³ª**: é‡è¤‡ã‚³ãƒ¼ãƒ‰å‰Šé™¤ã€ä¸€è²«æ€§å‘ä¸Š
- **é–‹ç™ºä½“é¨“**: Importæ–‡ã®çµ±ä¸€ã€ãƒ†ã‚¹ãƒˆå®Ÿè¡ŒåŠ¹ç‡åŒ–
- **å°†æ¥æ‹¡å¼µ**: ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã€ãƒ­ã‚°æ©Ÿèƒ½ç­‰ã®è¿½åŠ åŸºç›¤æ§‹ç¯‰

## âš¡ PoCãƒ¬ãƒ™ãƒ«æœ€é©åŒ–ï¼ˆãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°å¾Œã‚‚ç¶­æŒï¼‰

### ã‚·ãƒ³ãƒ—ãƒ«åŒ–é …ç›®
- **èªè¨¼**: JWTä½¿ç”¨ã€ã‚·ãƒ³ãƒ—ãƒ«ãªå®Ÿè£…
- **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£**: åŸºæœ¬çš„ãªãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã®ã¿
- **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**: åŸºæœ¬çš„ãªãƒ­ã‚°å‡ºåŠ›ã®ã¿
- **ã‚­ãƒ£ãƒƒã‚·ãƒ¥**: ãªã—ï¼ˆç›´æ¥DB ã‚¯ã‚¨ãƒªï¼‰
- **éåŒæœŸå‡¦ç†**: åŸºæœ¬çš„ãªåŒæœŸå‡¦ç†ã§ã‚¹ã‚¿ãƒ¼ãƒˆ

### æŠ€è¡“é¸æŠç†ç”±
- **FastAPI**: è‡ªå‹•ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç”Ÿæˆã€å‹å®‰å…¨ã€ä¾å­˜æ³¨å…¥ã‚µãƒãƒ¼ãƒˆ
- **Supabase**: PostgreSQLã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ©Ÿèƒ½ï¼ˆå°†æ¥æ‹¡å¼µå¯ï¼‰
- **GitHub Actions**: ç„¡æ–™æ ã€ç°¡å˜ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
- **Clean Architecture**: å°†æ¥ã®æ‹¡å¼µæ€§ã‚’è€ƒæ…®ã—ãŸè¨­è¨ˆ

## ğŸš€ ãƒ‡ãƒ—ãƒ­ã‚¤æˆ¦ç•¥

### é–‹ç™ºç’°å¢ƒ
- **Backend**: `uvicorn main:app --reload`
- **Frontend**: `npm run dev`
- **Database**: Supabase ã‚¯ãƒ©ã‚¦ãƒ‰

### æœ¬ç•ªç’°å¢ƒï¼ˆPoCï¼‰
- **Backend**: Vercel / Railway
- **Frontend**: Vercel
- **Database**: Supabase æœ¬ç•ªç’°å¢ƒ

**å®Ÿè£…æ™‚é–“è¦‹ç©**: Backend 3-5æ—¥ã€ãƒ‡ãƒ¼ã‚¿åé›† 2-3æ—¥ã€ãƒ†ã‚¹ãƒˆãƒ»çµ±åˆ 1-2æ—¥