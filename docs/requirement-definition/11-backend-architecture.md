# ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£è¨­è¨ˆ

**ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ**: Instagramåˆ†æã‚¢ãƒ—ãƒªï¼ˆPoCï¼‰  
**å¯¾è±¡**: 1-3äººã€100Instagramã‚¢ã‚«ã‚¦ãƒ³ãƒˆç®¡ç†  
**ã‚¹ã‚¿ãƒƒã‚¯**: FastAPI + Supabase + Next.js

## ğŸ—ï¸ ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“æ§‹æˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Next.js       â”‚â”€â”€â”€â”€â”‚   FastAPI    â”‚â”€â”€â”€â”€â”‚   Supabase      â”‚
â”‚   (Frontend)    â”‚    â”‚  (Backend)   â”‚    â”‚  (Database)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ GitHub Actions  â”‚
                    â”‚ (Data Collector)â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â”‚
                              â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚Instagram Graph  â”‚
                    â”‚      API        â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“Š ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆï¼ˆSupabaseï¼‰

### ãƒ†ãƒ¼ãƒ–ãƒ«æ§‹é€ 
```sql
-- ãƒ¦ãƒ¼ã‚¶ãƒ¼ç®¡ç†ï¼ˆè¶…ã‚·ãƒ³ãƒ—ãƒ«ï¼‰
users (id, username, password_hash, created_at)

-- Instagramã‚¢ã‚«ã‚¦ãƒ³ãƒˆç®¡ç†
instagram_accounts (
  id, name, ig_user_id, access_token, 
  username, profile_picture_url, created_at
)

-- æ—¥æ¬¡ã‚¢ã‚«ã‚¦ãƒ³ãƒˆçµ±è¨ˆ
daily_account_stats (
  date, ig_user_id, followers_count, follows_count, 
  media_count, profile_views, website_clicks
)

-- æŠ•ç¨¿ãƒ‡ãƒ¼ã‚¿
media_posts (
  ig_media_id, ig_user_id, timestamp, media_type,
  caption, media_url, thumbnail_url, permalink
)

-- æ—¥æ¬¡æŠ•ç¨¿çµ±è¨ˆ
daily_media_stats (
  date, ig_media_id, like_count, comments_count,
  reach, views, shares, saved
)
```

## ğŸ”§ FastAPIãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰æ§‹æˆ

### ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ 
```
backend/
â”œâ”€â”€ main.py              # FastAPI ã‚¢ãƒ—ãƒªèµ·ç‚¹
â”œâ”€â”€ auth/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ simple_auth.py   # ã‚·ãƒ³ãƒ—ãƒ«èªè¨¼
â”œâ”€â”€ api/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ accounts.py      # ã‚¢ã‚«ã‚¦ãƒ³ãƒˆç®¡ç†API
â”‚   â”œâ”€â”€ analytics.py     # åˆ†æãƒ‡ãƒ¼ã‚¿API
â”‚   â”œâ”€â”€ media.py         # æŠ•ç¨¿ãƒ‡ãƒ¼ã‚¿API
â”‚   â””â”€â”€ setup.py         # ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ãƒ»ãƒˆãƒ¼ã‚¯ãƒ³ç®¡ç†API
â”œâ”€â”€ models/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â””â”€â”€ database.py      # Supabaseãƒ¢ãƒ‡ãƒ«
â””â”€â”€ utils/
    â”œâ”€â”€ __init__.py
    â”œâ”€â”€ supabase_client.py # Supabaseæ¥ç¶š
    â””â”€â”€ instagram_client.py # Instagram APIçµ±åˆ
```

### ä¸»è¦API ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
```python
# èªè¨¼
POST /auth/login
POST /auth/logout

# ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ï¼ˆãƒˆãƒ¼ã‚¯ãƒ³ç®¡ç†ï¼‰
POST /setup/refresh-tokens    # å…¨ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã®ãƒˆãƒ¼ã‚¯ãƒ³ãƒªãƒ•ãƒ¬ãƒƒã‚·ãƒ¥ãƒ»æ–°è¦è¿½åŠ 

# ã‚¢ã‚«ã‚¦ãƒ³ãƒˆç®¡ç†
GET  /accounts          # å…¨Instagramã‚¢ã‚«ã‚¦ãƒ³ãƒˆä¸€è¦§
GET  /accounts/{id}     # å€‹åˆ¥ã‚¢ã‚«ã‚¦ãƒ³ãƒˆè©³ç´°

# åˆ†æãƒ‡ãƒ¼ã‚¿
GET  /analytics/yearly/{account_id}   # å¹´é–“åˆ†æ
GET  /analytics/monthly/{account_id}  # æœˆé–“åˆ†æ  
GET  /analytics/posts/{account_id}    # æŠ•ç¨¿åˆ†æ

# æŠ•ç¨¿ãƒ‡ãƒ¼ã‚¿
GET  /media/{account_id}              # æŠ•ç¨¿ä¸€è¦§
GET  /media/{media_id}/insights       # æŠ•ç¨¿ã‚¤ãƒ³ã‚µã‚¤ãƒˆ
```

## ğŸ¤– GitHub Actions ãƒ‡ãƒ¼ã‚¿åé›†

### ãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼æ§‹æˆ
```yaml
# .github/workflows/data-collection.yml
name: Daily Instagram Data Collection
on:
  schedule:
    - cron: '0 9 * * *'  # æ¯æ—¥9æ™‚å®Ÿè¡Œ

jobs:
  collect:
    runs-on: ubuntu-latest
    steps:
      - name: ãƒ‡ãƒ¼ã‚¿åé›†ã‚¹ã‚¯ãƒªãƒ—ãƒˆå®Ÿè¡Œ
        run: python scripts/daily_collector.py
      - name: Supabaseã¸ãƒ‡ãƒ¼ã‚¿ä¿å­˜
        run: python scripts/save_to_database.py
```

### ãƒ‡ãƒ¼ã‚¿åé›†ãƒ•ãƒ­ãƒ¼
1. **ã‚¢ã‚«ã‚¦ãƒ³ãƒˆåŸºæœ¬æƒ…å ±æ›´æ–°** (æ—¥1å›)
2. **æ–°è¦æŠ•ç¨¿æ¤œå‡ºãƒ»ä¿å­˜** (æŠ•ç¨¿æ¯)
3. **æŠ•ç¨¿ã‚¤ãƒ³ã‚µã‚¤ãƒˆå–å¾—** (æŠ•ç¨¿æ¯)
4. **ã‚¢ã‚«ã‚¦ãƒ³ãƒˆãƒ¬ãƒ™ãƒ«ã‚¤ãƒ³ã‚µã‚¤ãƒˆå–å¾—** (æ—¥1å›)

## ğŸ¯ å®Ÿè£…å„ªå…ˆåº¦

### Phase 1: åŸºç›¤æ§‹ç¯‰
1. âœ… **Supabase ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—**
2. âœ… **FastAPI åŸºæœ¬æ§‹æˆ**
3. âœ… **ã‚·ãƒ³ãƒ—ãƒ«èªè¨¼å®Ÿè£…**
4. âœ… **ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹åˆæœŸåŒ–**

### Phase 2: ãƒ‡ãƒ¼ã‚¿åé›†
1. âœ… **GitHub Actions ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—**
2. âœ… **Instagram API çµ±åˆ**
3. âœ… **æ¯æ—¥ãƒ‡ãƒ¼ã‚¿åé›†è‡ªå‹•åŒ–**

### Phase 3: åˆ†æAPI
1. âœ… **æŠ•ç¨¿åˆ†æã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**
2. âœ… **å¹´é–“/æœˆé–“åˆ†æã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**
3. âœ… **ã‚¢ã‚«ã‚¦ãƒ³ãƒˆç®¡ç†ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**

## âš¡ PoCãƒ¬ãƒ™ãƒ«æœ€é©åŒ–

### ã‚·ãƒ³ãƒ—ãƒ«åŒ–é …ç›®
- **èªè¨¼**: JWTä¸ä½¿ç”¨ã€ã‚»ãƒƒã‚·ãƒ§ãƒ³ãƒ™ãƒ¼ã‚¹
- **ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£**: RLSç„¡åŠ¹ã€åŸºæœ¬çš„ãªãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ã®ã¿
- **ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°**: åŸºæœ¬çš„ãªãƒ­ã‚°å‡ºåŠ›ã®ã¿
- **ã‚­ãƒ£ãƒƒã‚·ãƒ¥**: ãªã—ï¼ˆç›´æ¥DB ã‚¯ã‚¨ãƒªï¼‰
- **éåŒæœŸå‡¦ç†**: åŸºæœ¬çš„ãªåŒæœŸå‡¦ç†ã§ã‚¹ã‚¿ãƒ¼ãƒˆ

### æŠ€è¡“é¸æŠç†ç”±
- **FastAPI**: è‡ªå‹•ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆç”Ÿæˆã€å‹å®‰å…¨
- **Supabase**: PostgreSQLã€ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ©Ÿèƒ½ï¼ˆå°†æ¥æ‹¡å¼µå¯ï¼‰
- **GitHub Actions**: ç„¡æ–™æ ã€ç°¡å˜ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

## ğŸš€ ãƒ‡ãƒ—ãƒ­ã‚¤æˆ¦ç•¥

### é–‹ç™ºç’°å¢ƒ
- **Backend**: `uvicorn main:app --reload`
- **Frontend**: `npm run dev`
- **Database**: Supabase ã‚¯ãƒ©ã‚¦ãƒ‰

### æœ¬ç•ªç’°å¢ƒï¼ˆPoCï¼‰
- **Backend**: Vercel / Railway
- **Frontend**: Vercel
- **Database**: Supabase æœ¬ç•ªç’°å¢ƒ

**å®Ÿè£…æ™‚é–“è¦‹ç©**: Backend 3-5æ—¥ã€ãƒ‡ãƒ¼ã‚¿åé›† 2-3æ—¥ã€ãƒ†ã‚¹ãƒˆãƒ»çµ±åˆ 1-2æ—¥